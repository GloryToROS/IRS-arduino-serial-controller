# IRS-arduino-serial-controller
The source code for the controller on the IRS-1 and IRS-1

## Код
Для конкретной комбинации контроллера и драйвера моторов смотри соотвествующую ветку репозитория

## Структура проекта
На каждой роботизированной платформе стоит контроллер (на данный момент - ардуино), который занимается непосредственным управлением платформы и первичной обработкой получаемых данных. Данные передаются по USB на компьютер на плафторме (на данный момент - raspberry pi), который занимается дальнейшей обработкой и в ответ отправляет управляющие данные на контроллер
*скорость 9600 бод

## Протокол (команды от компьютера)
ВАЖНО: в зависимости от прошивки (может и не быть) контроллер отправляет данные со всех своих энкодеров в Serial раз в 100 милисекунд (безусловно)

### Команда
`идентификатор параметр_1 параметр_2 параметр_3 .....`

идентификатор - один латинский символ - выбор команды

параметр_n - чисто (целое), пишется опционально

разделитель - пробел

символ завершения ввода - '\n'

ВАЖНО: если был запрошен неизвестный идентификатор, контроллер ничего не выполнит и ответит `ERROR: unknow command` 

ВАЖНО: каждый идентификатор подразумевает определенное количество параметров, если их будет введено неверное количество, контроллер не выполнит команду и ответит `ERROR: unknow command`

### Идентификаторы (основные)
`m параметр_1 параметр_2` - запустить мотор номер `параметр_1` с мощностью `параметр_2` (в процентах, 0 - выключить (не стоп), 100 - максимум вперед, -50 - в половину мощности назад)

`M параметр_1 параметр_2 ...` - запустить моторы (все) с мощностью `параметр_1`, `параметр_2`, ... - где каждый параметр, мощность соответствующего мотора (в конкретной прошивке конкретное кол-во параметров = моторов), значения мощностей определяются так же, как идентификаторе `m`

`n параметр_1 параметр_2` - запустить мотор номер `параметр_1` со скоростью `параметр_2` в сантиметрах в секунду (0 - стоп, 10 - 10 см/сек вперед, -5 - 5 см/сек назад)

`N параметр_1 параметр_2 ...` - запустить моторы (все) со скоростью `параметр_1`, `параметр_2`, ... - где каждый параметр, скорость соответствующего мотора (в конкретной прошивке конкретное кол-во параметров = моторов), значения скоростей определяются так же, как идентификаторе `n`

`S` - стоп всех моторов (отключение или остановка, в зависимости от прошивки)

`g` - запросить данные с робота (энкодеры, вольтметры, гироскопы и т.д., в зависимости от прошивки)

### Идентификаторы (дополнительные, могут отсутствовать в конкретной прошивке, используются в основном для тестирования)
`F` - движение робота вперед

`B` - движение робота назад

`R` - движение робота вправо

`L` - движение робота влево

`t` - запустить тестовую функцию



